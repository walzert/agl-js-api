!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.AGLJS=t():n.AGLJS=t()}(window,function(){return r={},o.m=e=[function(n,t){AFB=function(n,t){"object"!=typeof n&&(n={base:n,token:t});function e(n,t){this.token=n,this.uuid=t}var c,r,o={base:n.base||"api",token:n.token||t||"HELLO",host:n.host||window.location.host,url:n.url||void 0},u=o.url||"ws://"+o.host+"/"+o.base,i=void 0,a=o.token;e.prototype={get token(){return a},set token(n){n&&(a=n)},get uuid(){return i},set uuid(n){n&&(i=n)}},c=new e;function s(n,t,e,r){if(t in n){var o=n[t];delete n[t];try{o[r](e)}catch(n){}}}return(r=function(n,t){var e=u,r="?";c.token&&(e=e+"?x-afb-token="+c.token,r="&"),c.uuid&&(e=e+r+"x-afb-uuid="+c.uuid),this.ws=new WebSocket(e,["x-afb-ws-json1"]),this.url=e,this.pendings={},this.awaitens={},this.counter=0,this.ws.onopen=function(n){var t=this.onopen;delete this.onopen,delete this.onabort,t&&t(this)}.bind(this),this.ws.onerror=function(n){var t=this.onabort;t&&(delete this.onopen,delete this.onabort,t&&t(this));this.onerror&&this.onerror(this)}.bind(this),this.ws.onclose=function(n){var t={jtype:"afb-reply",request:{status:"disconnected",info:"server hung up"}};for(var e in this.pendings)try{this.pendings[e][1](t)}catch(n){}this.pendings={},this.onclose&&this.onclose()}.bind(this),this.ws.onmessage=function(n){var t=JSON.parse(n.data),e=t[0],r=t[1],o=t[2];switch(c.token=t[3],e){case 3:s(this.pendings,r,o,0);break;case 4:s(this.pendings,r,o,1);break;case 5:default:!function(n,t,e){var r=n[t];r&&r.forEach(function(n){n(e)});var o=t.indexOf("/");0<=o&&(r=n[t.substring(0,o)])&&r.forEach(function(n){n(e)});(r=n["*"])&&r.forEach(function(n){n(e)})}(this.awaitens,r,o)}}.bind(this),this.onopen=n,this.onabort=t}).prototype={close:function(){this.ws.close(),this.ws.onopen=this.ws.onerror=this.ws.onclose=this.ws.onmessage=this.onopen=this.onabort=function(){}},call:function(o,u,i){return new Promise(function(n,t){var e,r;if(i){if((e=String(i))in this.pendings)throw new Error("pending callid("+e+") exists")}else for(;(e=String(this.counter=4095&this.counter+1))in this.pendings;);this.pendings[e]=[n,t],r=[2,e,o,u],c.token&&r.push(c.token),this.ws.send(JSON.stringify(r))}.bind(this))},onevent:function(n,t){(this.awaitens[n]||(this.awaitens[n]=[])).push(t)}},{context:c,ws:r}}},function(n,t,e){"use strict";e.r(t);var r={};e.r(r),e.d(r,"call",function(){return y}),e.d(r,"subscribe",function(){return w}),e.d(r,"init",function(){return k});var o={};e.r(o),e.d(o,"runnables",function(){return x}),e.d(o,"start",function(){return j});var u={};e.r(u),e.d(u,"list_controls",function(){return M}),e.d(u,"set_volume",function(){return O}),e.d(u,"on_volume_changed",function(){return S}),e.d(u,"on_controls_changed",function(){return q});var i={};e.r(i),e.d(i,"adapter_state",function(){return B}),e.d(i,"managed_objects",function(){return P}),e.d(i,"pair",function(){return z}),e.d(i,"cancel_pairing",function(){return L}),e.d(i,"confirm_pairing",function(){return E}),e.d(i,"remove_device",function(){return A}),e.d(i,"connect",function(){return J}),e.d(i,"disconnect",function(){return T}),e.d(i,"on_device_changes",function(){return W});var c={};e.r(c),e.d(c,"do_compose",function(){return F}),e.d(c,"get_message",function(){return G}),e.d(c,"list_messages",function(){return H}),e.d(c,"on_notification",function(){return N});var a={};e.r(a),e.d(a,"showWindow",function(){return R});var s={};e.r(s),e.d(s,"get_temp_left_zone",function(){return U}),e.d(s,"get_temp_right_zone",function(){return C}),e.d(s,"get_fanspeed",function(){return D}),e.d(s,"get",function(){return I}),e.d(s,"set",function(){return K}),e.d(s,"set_temp_left_zone_led",function(){return Q}),e.d(s,"set_temp_right_zone_led",function(){return V});var f={};e.r(f),e.d(f,"get_list",function(){return X}),e.d(f,"do_auth",function(){return Y}),e.d(f,"do_write",function(){return Z}),e.d(f,"get_signal",function(){return $}),e.d(f,"subscribe_by_event",function(){return nn}),e.d(f,"unsubscribe_by_event",function(){return tn}),e.d(f,"subscribe_by_id",function(){return en}),e.d(f,"unsubscribe_by_id",function(){return rn});var d={};e.r(d),e.d(d,"playlist",function(){return on}),e.d(d,"pickTrack",function(){return un}),e.d(d,"loop",function(){return cn}),e.d(d,"seek",function(){return an}),e.d(d,"play",function(){return sn}),e.d(d,"pause",function(){return fn}),e.d(d,"previous",function(){return dn}),e.d(d,"next",function(){return ln}),e.d(d,"on_playlist_changes",function(){return pn}),e.d(d,"on_metadata_changes",function(){return hn});var l={};e.r(l),e.d(l,"get_frequency",function(){return _n}),e.d(l,"set_frequency",function(){return bn}),e.d(l,"get_band",function(){return gn}),e.d(l,"set_band",function(){return mn}),e.d(l,"get_band_supported",function(){return vn}),e.d(l,"get_frequency_range",function(){return yn}),e.d(l,"get_frequency_step",function(){return wn}),e.d(l,"start",function(){return kn}),e.d(l,"stop",function(){return xn}),e.d(l,"scan_start",function(){return jn}),e.d(l,"scan_stop",function(){return Mn}),e.d(l,"get_stereo_mode",function(){return On}),e.d(l,"set_stereo_mode",function(){return Sn}),e.d(l,"on_frequency",function(){return qn}),e.d(l,"on_station_found",function(){return Bn}),e.d(l,"on_status",function(){return Pn});var p={};e.r(p),e.d(p,"get",function(){return zn}),e.d(p,"get_by_options",function(){return Ln}),e.d(p,"list",function(){return En}),e.d(p,"addObjects",function(){return An}),e.d(p,"subscribe_by_signal",function(){return Jn});var h={};e.r(h),e.d(h,"get_platform_info",function(){return Tn});e(0);var _,b=document.location.hostname,g=document.location.port,m=new URLSearchParams(document.location.search.substring(1)),v=m.get("x-afb-token")||m.get("token")||"HELLO";function y(r,o){return new Promise(function(t,e){var n=new _.ws(function(){n.call(r,o).then(function(n){t(n.response)},function(n){e(n)})},function(){e("ws aborted")})})}function w(o,u,i){return new Promise(function(e,t){var r=new _.ws(function(){r.call(o,u).then(function(n){var t=o.split("/")[0]+"/"+(u.value?u.value:u.event);r.onevent(t,function(n){i(n.data)}),e()},function(n){t(n)})},function(){t("ws aborted")})})}function k(){_=new AFB({host:b+":"+g,token:v})}function x(){return y("afm-main/runnables",{})}function j(n){return y("afm-main/start",{id:n})}function M(){return y("audiomixer/list_controls",{})}function O(n,t){return y("audiomixer/volume",{control:n,value:t})}function S(n){return w("audiomixer/subscribe",{event:"volume_changed"},n)}function q(n){return w("audiomixer/subscribe",{event:"controls_changed"},n)}function B(n){return y("Bluetooth-Manager/adapter_state",n||{})}function P(){return y("Bluetooth-Manager/managed_objects",{})}function z(n){return y("Bluetooth-Manager/pair",{device:n})}function L(){return y("Bluetooth-Manager/cancel_pairing",{})}function E(n){return y("Bluetooth-Manager/confirm_pairing",{pincode:n})}function A(n){return y("Bluetooth-Manager/remove_device",{device:n})}function J(n){return y("Bluetooth-Manager/connect",{device:n})}function T(n){return y("Bluetooth-Manager/disconnect",{device:n})}function W(n){return w("Bluetooth-Manager/subscribe",{value:"device_changes"},n)}function F(n,t){return y("bluetooth-map/compose",{recipient:n,message:t})}function G(n){return y("bluetooth-map/message",{handle:n})}function H(n){return y("bluetooth-map/list_messages",{folder:n})}function N(n){return w("bluetooth-map/subscribe",{value:"notification"},n)}function R(n){return y("homescreen/showWindow",{application_id:n,parameter:{area:"normal.full"}})}function U(){return y("hvac/get_temp_left_zone",{})}function C(){return y("hvac/get_temp_right_zone",{})}function D(){return y("hvac/get_fanspeed",{})}function I(){return y("hvac/get",{})}function K(n,t){return y("hvac/set",{i:n,comp:t})}function Q(){return y("hvac/temp_left_zone_led",{})}function V(){return y("hvac/temp_right_zone_led",{})}function X(){return y("low-can/list",{})}function Y(){return y("low-can/auth",{})}function Z(n,t){return y("low-can/write",{signal_name:n,signal_value:t})}function $(n){return y("low-can/get",{event:n})}function nn(n,t){return w("low-can/subscribe",{event:t},n)}function tn(n,t){return w("low-can/unsubscribe",{event:t},n)}function en(n,t){return w("low-can/subscribe",{id:t},n)}function rn(n,t){return w("low-can/unsubscribe",{id:t},n)}function on(){return y("mediaplayer/playlist",{})}function un(n){return y("mediaplayer/controls",{value:"pick-track",index:n})}function cn(n){return y("mediaplayer/controls",{value:"loop"})}function an(n){return y("mediaplayer/controls",{value:"seek",position:n})}function sn(){return y("mediaplayer/controls",{value:"play"})}function fn(){return y("mediaplayer/controls",{value:"pause"})}function dn(){return y("mediaplayer/controls",{value:"previous"})}function ln(){return y("mediaplayer/controls",{value:"next"})}function pn(n){return w("mediaplayer/subscribe",{value:"playlist"},n)}function hn(n){return w("mediaplayer/subscribe",{value:"metadata"},n)}function _n(){return y("radio/frequency",{})}function bn(n){return y("radio/frequency",{value:n})}function gn(){return y("radio/band",{})}function mn(n){return y("radio/band",{band:n})}function vn(n){return y("radio/band_supported",{band:n})}function yn(n){return y("radio/frequency_range",{band:n})}function wn(n){return y("radio/frequency_range",{band:n})}function kn(){return y("radio/start",{})}function xn(){return y("radio/stop",{})}function jn(n){return y("radio/scan_start",{direction:n})}function Mn(){return y("radio/scan_stop",{})}function On(){return y("radio/stereo_mode",{})}function Sn(n){return y("radio/stereo_mode",{value:n})}function qn(n){return w("radio/subscribe",{value:"frequency"},n)}function Bn(n){return w("radio/subscribe",{value:"station_found"},n)}function Pn(n){return w("radio/subscribe",{value:"status"},n)}function zn(n){return y("signal-composer/get",{signal:n})}function Ln(n,t,e,r){return y("signal-composer/get",{signal:n,options:{average:t,minimum:e,maximum:r}})}function En(){return y("signal-composer/list",{})}function An(n){return y("signal-composer/addObjects",{file:n})}function Jn(n,t){return w("signal-composer/subscribe",{signal:t},n)}function Tn(){return y("platform-info/get",{})}e.d(t,"afmMain",function(){return o}),e.d(t,"audiomixer",function(){return u}),e.d(t,"bluetooth",function(){return i}),e.d(t,"bluetoothmap",function(){return c}),e.d(t,"bluetoothpbap",function(){return i}),e.d(t,"homescreen",function(){return a}),e.d(t,"hvac",function(){return s}),e.d(t,"lowcan",function(){return f}),e.d(t,"mediaplayer",function(){return d}),e.d(t,"radio",function(){return l}),e.d(t,"signalcomposer",function(){return p}),e.d(t,"platforminfo",function(){return h}),e.d(t,"api",function(){return r}),k()}],o.c=r,o.d=function(n,t,e){o.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:e})},o.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},o.t=function(t,n){if(1&n&&(t=o(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(o.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)o.d(e,r,function(n){return t[n]}.bind(null,r));return e},o.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return o.d(t,"a",t),t},o.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},o.p="",o(o.s=1);function o(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var e,r});